{"ast":null,"code":"import React,{createContext,useContext,useEffect,useState}from'react';import{io}from'socket.io-client';import{jsx as _jsx}from\"react/jsx-runtime\";const SocketContext=/*#__PURE__*/createContext();export const useSocket=()=>{const context=useContext(SocketContext);if(!context){throw new Error('useSocket must be used within a SocketProvider');}return context;};export const SocketProvider=_ref=>{let{children}=_ref;const[socket,setSocket]=useState(null);const[isConnected,setIsConnected]=useState(false);useEffect(()=>{// Créer la connexion Socket.IO\n// Désactiver Socket.IO sur Vercel (WebSockets non supportés)\n// const newSocket = io('http://localhost:5001', {\n//   transports: ['websocket', 'polling']\n// });\nconst newSocket=null;// Désactivé pour Vercel\n// Désactiver les événements Socket.IO pour Vercel\nif(newSocket){newSocket.on('connect',()=>{console.log('Connecté au serveur WebSocket');setIsConnected(true);});newSocket.on('disconnect',()=>{console.log('Déconnecté du serveur WebSocket');setIsConnected(false);});newSocket.on('connect_error',error=>{console.error('Erreur de connexion WebSocket:',error);setIsConnected(false);});setSocket(newSocket);// Cleanup\nreturn()=>{newSocket.close();};}else{// Simulation pour Vercel\nsetIsConnected(false);setSocket(null);}},[]);const joinAdminRoom=()=>{if(socket&&isConnected){socket.emit('join-admin');console.log('Rejoint la room admin');}};const leaveAdminRoom=()=>{if(socket&&isConnected){socket.emit('leave-admin');console.log('Quitté la room admin');}};const value={socket,isConnected,joinAdminRoom,leaveAdminRoom};return/*#__PURE__*/_jsx(SocketContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","io","jsx","_jsx","SocketContext","useSocket","context","Error","SocketProvider","_ref","children","socket","setSocket","isConnected","setIsConnected","newSocket","on","console","log","error","close","joinAdminRoom","emit","leaveAdminRoom","value","Provider"],"sources":["C:/Users/houda/OneDrive/Bureau/boutique-vetements/boutique-unified/frontend/src/contexts/SocketContext.js"],"sourcesContent":["import React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport { io } from 'socket.io-client';\r\n\r\nconst SocketContext = createContext();\r\n\r\nexport const useSocket = () => {\r\n  const context = useContext(SocketContext);\r\n  if (!context) {\r\n    throw new Error('useSocket must be used within a SocketProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const SocketProvider = ({ children }) => {\r\n  const [socket, setSocket] = useState(null);\r\n  const [isConnected, setIsConnected] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Créer la connexion Socket.IO\r\n    // Désactiver Socket.IO sur Vercel (WebSockets non supportés)\r\n    // const newSocket = io('http://localhost:5001', {\r\n    //   transports: ['websocket', 'polling']\r\n    // });\r\n    const newSocket = null; // Désactivé pour Vercel\r\n\r\n    // Désactiver les événements Socket.IO pour Vercel\r\n    if (newSocket) {\r\n      newSocket.on('connect', () => {\r\n        console.log('Connecté au serveur WebSocket');\r\n        setIsConnected(true);\r\n      });\r\n\r\n      newSocket.on('disconnect', () => {\r\n        console.log('Déconnecté du serveur WebSocket');\r\n        setIsConnected(false);\r\n      });\r\n\r\n      newSocket.on('connect_error', (error) => {\r\n        console.error('Erreur de connexion WebSocket:', error);\r\n        setIsConnected(false);\r\n      });\r\n\r\n      setSocket(newSocket);\r\n\r\n      // Cleanup\r\n      return () => {\r\n        newSocket.close();\r\n      };\r\n    } else {\r\n      // Simulation pour Vercel\r\n      setIsConnected(false);\r\n      setSocket(null);\r\n    }\r\n  }, []);\r\n\r\n  const joinAdminRoom = () => {\r\n    if (socket && isConnected) {\r\n      socket.emit('join-admin');\r\n      console.log('Rejoint la room admin');\r\n    }\r\n  };\r\n\r\n  const leaveAdminRoom = () => {\r\n    if (socket && isConnected) {\r\n      socket.emit('leave-admin');\r\n      console.log('Quitté la room admin');\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    socket,\r\n    isConnected,\r\n    joinAdminRoom,\r\n    leaveAdminRoom\r\n  };\r\n\r\n  return (\r\n    <SocketContext.Provider value={value}>\r\n      {children}\r\n    </SocketContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC7E,OAASC,EAAE,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEtC,KAAM,CAAAC,aAAa,cAAGP,aAAa,CAAC,CAAC,CAErC,MAAO,MAAM,CAAAQ,SAAS,CAAGA,CAAA,GAAM,CAC7B,KAAM,CAAAC,OAAO,CAAGR,UAAU,CAACM,aAAa,CAAC,CACzC,GAAI,CAACE,OAAO,CAAE,CACZ,KAAM,IAAI,CAAAC,KAAK,CAAC,gDAAgD,CAAC,CACnE,CACA,MAAO,CAAAD,OAAO,CAChB,CAAC,CAED,MAAO,MAAM,CAAAE,cAAc,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACzC,KAAM,CAACE,MAAM,CAAEC,SAAS,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CAC1C,KAAM,CAACa,WAAW,CAAEC,cAAc,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CAErDD,SAAS,CAAC,IAAM,CACd;AACA;AACA;AACA;AACA;AACA,KAAM,CAAAgB,SAAS,CAAG,IAAI,CAAE;AAExB;AACA,GAAIA,SAAS,CAAE,CACbA,SAAS,CAACC,EAAE,CAAC,SAAS,CAAE,IAAM,CAC5BC,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC,CAC5CJ,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,CAAC,CAEFC,SAAS,CAACC,EAAE,CAAC,YAAY,CAAE,IAAM,CAC/BC,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC,CAC9CJ,cAAc,CAAC,KAAK,CAAC,CACvB,CAAC,CAAC,CAEFC,SAAS,CAACC,EAAE,CAAC,eAAe,CAAGG,KAAK,EAAK,CACvCF,OAAO,CAACE,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CACtDL,cAAc,CAAC,KAAK,CAAC,CACvB,CAAC,CAAC,CAEFF,SAAS,CAACG,SAAS,CAAC,CAEpB;AACA,MAAO,IAAM,CACXA,SAAS,CAACK,KAAK,CAAC,CAAC,CACnB,CAAC,CACH,CAAC,IAAM,CACL;AACAN,cAAc,CAAC,KAAK,CAAC,CACrBF,SAAS,CAAC,IAAI,CAAC,CACjB,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAS,aAAa,CAAGA,CAAA,GAAM,CAC1B,GAAIV,MAAM,EAAIE,WAAW,CAAE,CACzBF,MAAM,CAACW,IAAI,CAAC,YAAY,CAAC,CACzBL,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC,CACtC,CACF,CAAC,CAED,KAAM,CAAAK,cAAc,CAAGA,CAAA,GAAM,CAC3B,GAAIZ,MAAM,EAAIE,WAAW,CAAE,CACzBF,MAAM,CAACW,IAAI,CAAC,aAAa,CAAC,CAC1BL,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC,CACrC,CACF,CAAC,CAED,KAAM,CAAAM,KAAK,CAAG,CACZb,MAAM,CACNE,WAAW,CACXQ,aAAa,CACbE,cACF,CAAC,CAED,mBACEpB,IAAA,CAACC,aAAa,CAACqB,QAAQ,EAACD,KAAK,CAAEA,KAAM,CAAAd,QAAA,CAClCA,QAAQ,CACa,CAAC,CAE7B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _objectSpread from\"C:/Users/houda/OneDrive/Bureau/boutique-vetements/frontend-vercel/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import{FaTrash,FaArrowLeft,FaLock,FaTruck,FaCreditCard,FaShieldAlt}from'react-icons/fa';import{toast}from'react-toastify';import{useCart}from'../contexts/CartContext';import{useAuth}from'../contexts/AuthContext';import{useOrders}from'../contexts/OrdersContext';import{useSettings}from'../contexts/SettingsContext';import{formatBrand}from'../utils/formatUtils';import'../styles/Cart.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Cart=()=>{const[loading,setLoading]=useState(true);const[updating,setUpdating]=useState(false);const[showCheckout,setShowCheckout]=useState(false);const[forceUpdate,setForceUpdate]=useState(0);const{cart,updateQuantity,removeFromCart,clearCart,getTotal,getItemCount}=useCart();const{user}=useAuth();const{addOrder}=useOrders();const{getActivePaymentMethods,calculateDeliveryFees,getDeliveryInfo,getCurrency}=useSettings();const navigate=useNavigate();useEffect(()=>{if(user){fetchCart();}else{setLoading(false);}},[user]);// Effet pour forcer la mise à jour quand le panier change\nuseEffect(()=>{var _cart$articles;console.log('🔄 Panier mis à jour:',cart);console.log('🔄 Nombre d\\'articles:',((_cart$articles=cart.articles)===null||_cart$articles===void 0?void 0:_cart$articles.length)||0);},[cart]);const fetchCart=async()=>{try{setLoading(true);// Cart is already loaded by the context, no need to fetch\n}catch(error){toast.error('Erreur lors du chargement du panier');}finally{setLoading(false);}};const handleQuantityChange=async(productId,newQuantity)=>{if(newQuantity<1)return;try{setUpdating(true);await updateQuantity(productId,newQuantity);// Le panier est automatiquement mis à jour par le contexte\ntoast.success('Quantité mise à jour');}catch(error){toast.error('Erreur lors de la mise à jour de la quantité');}finally{setUpdating(false);}};const handleRemoveItem=async productId=>{console.log('🗑️ Suppression du produit:',productId);console.log('Panier avant suppression:',cart);try{setUpdating(true);const result=await removeFromCart(productId);console.log('Résultat de la suppression:',result);if(result.success){toast.success('Produit retiré du panier');// Forcer le re-render\nsetForceUpdate(prev=>prev+1);console.log('🔄 Force update déclenché');}else{toast.error('Erreur lors de la suppression du produit');}}catch(error){console.error('Erreur lors de la suppression:',error);toast.error('Erreur lors de la suppression du produit');}finally{setUpdating(false);}};const handleClearCart=async()=>{if(window.confirm('Êtes-vous sûr de vouloir vider votre panier ?')){try{setUpdating(true);await clearCart();toast.success('Panier vidé');}catch(error){toast.error('Erreur lors du vidage du panier');}finally{setUpdating(false);}}};const handleCheckout=()=>{if(!user){toast.error('Veuillez vous connecter pour continuer');navigate('/login',{state:{from:'/cart'}});return;}setShowCheckout(true);};const handleContinueShopping=()=>{navigate('/products');};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Chargement du panier...\"})]});}if(!user){return/*#__PURE__*/_jsx(\"div\",{className:\"cart-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Mon Panier\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-required\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Connexion requise\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Veuillez vous connecter pour acc\\xE9der \\xE0 votre panier\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-buttons\",children:[/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"btn-primary\",children:\"Se connecter\"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"btn-secondary\",children:\"Cr\\xE9er un compte\"})]})]})]})});}if(cart.articles&&cart.articles.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"cart-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Mon Panier\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"empty-cart\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-cart-icon\",children:\"\\uD83D\\uDED2\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Votre panier est vide\"}),/*#__PURE__*/_jsx(\"p\",{children:\"D\\xE9couvrez nos produits et commencez vos achats\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleContinueShopping,className:\"btn-primary\",children:\"Continuer mes achats\"})]})]})});}const subtotal=getTotal();const shipping=calculateDeliveryFees(subtotal);const total=subtotal+shipping;const itemCount=getItemCount();const deliveryInfo=getDeliveryInfo();const currency=getCurrency();return/*#__PURE__*/_jsx(\"div\",{className:\"cart-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Mon Panier\"}),/*#__PURE__*/_jsxs(\"p\",{children:[itemCount,\" article(s) dans votre panier\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-items\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-items-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Produits\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleClearCart,className:\"clear-cart-btn\",disabled:updating,children:[/*#__PURE__*/_jsx(FaTrash,{}),\"Vider le panier\"]})]}),cart.articles&&cart.articles.map(item=>/*#__PURE__*/_jsx(CartItem,{item:item,onQuantityChange:handleQuantityChange,onRemove:handleRemoveItem,updating:updating},\"\".concat(item._id,\"-\").concat(forceUpdate)))]}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-summary\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"R\\xE9sum\\xE9 de la commande\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Sous-total (\",itemCount,\" article(s))\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[subtotal.toFixed(2),\" \",currency]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Frais de livraison\"}),/*#__PURE__*/_jsx(\"span\",{children:shipping===0?/*#__PURE__*/_jsx(\"span\",{className:\"free-shipping\",children:\"Gratuit\"}):\"\".concat(shipping.toFixed(2),\" \").concat(currency)})]}),shipping>0&&deliveryInfo.livraisonGratuite&&/*#__PURE__*/_jsx(\"div\",{className:\"shipping-info\",children:/*#__PURE__*/_jsxs(\"small\",{children:[\"Livraison gratuite \\xE0 partir de \",deliveryInfo.seuil,\" \",currency,\" d'achat\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row total\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{children:[total.toFixed(2),\" \",currency]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleCheckout,className:\"checkout-btn\",disabled:updating,children:[/*#__PURE__*/_jsx(FaLock,{}),\"Passer la commande\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleContinueShopping,className:\"continue-shopping-btn\",children:[/*#__PURE__*/_jsx(FaArrowLeft,{}),\"Continuer mes achats\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"security-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"security-item\",children:[/*#__PURE__*/_jsx(FaShieldAlt,{}),/*#__PURE__*/_jsx(\"span\",{children:\"Paiement s\\xE9curis\\xE9\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"security-item\",children:[/*#__PURE__*/_jsx(FaTruck,{}),/*#__PURE__*/_jsx(\"span\",{children:\"Livraison rapide\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"security-item\",children:[/*#__PURE__*/_jsx(FaCreditCard,{}),/*#__PURE__*/_jsx(\"span\",{children:\"Retours gratuits\"})]})]})]})})]}),showCheckout&&/*#__PURE__*/_jsx(CheckoutSection,{cart:cart,total:total,shipping:shipping,onClose:()=>setShowCheckout(false),onSuccess:newOrder=>{setShowCheckout(false);addOrder(newOrder);// Ajouter la nouvelle commande au contexte\nnavigate('/orders');},getActivePaymentMethods:getActivePaymentMethods})]})});};// Composant article du panier\nconst CartItem=_ref=>{var _item$produit$images,_item$produit$images$,_item$produit$images2,_item$produit$images3,_item$produit$images4;let{item,onQuantityChange,onRemove,updating}=_ref;const[quantity,setQuantity]=useState(item.quantite);const handleQuantityChange=newQuantity=>{if(newQuantity>=1&&newQuantity<=10){setQuantity(newQuantity);onQuantityChange(item.produit._id,newQuantity);}};const handleRemove=()=>{console.log('🔍 CartItem - item:',item);console.log('🔍 CartItem - item.produit:',item.produit);console.log('🔍 CartItem - item.produit._id:',item.produit._id);onRemove(item.produit._id);};const price=item.prixUnitaire;const totalPrice=price*item.quantite;return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"item-image\",children:/*#__PURE__*/_jsx(\"img\",{src:((_item$produit$images=item.produit.images)===null||_item$produit$images===void 0?void 0:(_item$produit$images$=_item$produit$images[0])===null||_item$produit$images$===void 0?void 0:_item$produit$images$.url)||((_item$produit$images2=item.produit.images)===null||_item$produit$images2===void 0?void 0:_item$produit$images2[0])||'/placeholder-product.jpg',alt:((_item$produit$images3=item.produit.images)===null||_item$produit$images3===void 0?void 0:(_item$produit$images4=_item$produit$images3[0])===null||_item$produit$images4===void 0?void 0:_item$produit$images4.alt)||item.produit.nom,onError:e=>{e.target.src='/placeholder-product.jpg';}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item-info\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"item-name\",children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.produit._id),children:item.produit.nom})}),/*#__PURE__*/_jsx(\"p\",{className:\"item-brand\",children:formatBrand(item.produit.marque)}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-options\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"option\",children:[\"Taille: \",item.taille]}),/*#__PURE__*/_jsxs(\"span\",{className:\"option\",children:[\"Couleur: \",item.couleur]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-price\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"unit-price\",children:[price.toFixed(2),\" TND\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"total-price\",children:[totalPrice.toFixed(2),\" TND\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"item-quantity\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleQuantityChange(quantity-1),disabled:quantity<=1||updating,className:\"quantity-btn\",children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{className:\"quantity-display\",children:item.quantite}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleQuantityChange(quantity+1),disabled:quantity>=10||updating,className:\"quantity-btn\",children:\"+\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRemove,disabled:updating,className:\"remove-item-btn\",title:\"Retirer du panier\",children:/*#__PURE__*/_jsx(FaTrash,{})})]})]});};// Composant de passage de commande\nconst CheckoutSection=_ref2=>{let{cart,total,shipping,onClose,onSuccess,getActivePaymentMethods}=_ref2;const[formData,setFormData]=useState({adresseLivraison:{nom:'',prenom:'',rue:'',ville:'',codePostal:'',pays:'Tunisie',telephone:''},methodePaiement:'carte',notes:''});const[loading,setLoading]=useState(false);const[errors,setErrors]=useState({});// Initialiser la méthode de paiement avec la première méthode active\nuseEffect(()=>{const activeMethods=getActivePaymentMethods();if(activeMethods.length>0&&formData.methodePaiement==='carte'){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{methodePaiement:activeMethods[0].value}));}},[]);const handleChange=e=>{const{name,value}=e.target;if(name.includes('.')){const[parent,child]=name.split('.');setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[parent]:_objectSpread(_objectSpread({},prev[parent]),{},{[child]:value})}));}else{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));}// Effacer l'erreur du champ modifié\nif(errors[name]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:''}));}};const validateForm=()=>{const newErrors={};// Validation du nom\nif(!formData.adresseLivraison.nom.trim()){newErrors['adresseLivraison.nom']='Le nom est requis';}// Validation du prénom\nif(!formData.adresseLivraison.prenom.trim()){newErrors['adresseLivraison.prenom']='Le prénom est requis';}// Validation de la rue\nif(!formData.adresseLivraison.rue.trim()){newErrors['adresseLivraison.rue']='La rue est requise';}// Validation de la ville\nif(!formData.adresseLivraison.ville.trim()){newErrors['adresseLivraison.ville']='La ville est requise';}// Validation du code postal\nif(!formData.adresseLivraison.codePostal){newErrors['adresseLivraison.codePostal']='Le code postal est requis';}else if(!/^\\d{5}$/.test(formData.adresseLivraison.codePostal)){newErrors['adresseLivraison.codePostal']='Le code postal doit contenir 5 chiffres';}// Validation du téléphone\nif(!formData.adresseLivraison.telephone.trim()){newErrors['adresseLivraison.telephone']='Le téléphone est requis';}else if(!/^[0-9+\\-\\s()]{10,}$/.test(formData.adresseLivraison.telephone)){newErrors['adresseLivraison.telephone']='Le téléphone doit contenir au moins 10 caractères';}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}setLoading(true);try{const orderData={adresseLivraison:formData.adresseLivraison,methodePaiement:formData.methodePaiement,notes:formData.notes};console.log('📤 Envoi des données de commande:',orderData);const response=await fetch('/api/orders',{method:'POST',headers:{'Content-Type':'application/json','x-auth-token':localStorage.getItem('token')},body:JSON.stringify(orderData)});console.log('📥 Réponse du serveur:',response.status,response.statusText);if(!response.ok){const errorData=await response.json();console.error('❌ Erreur du serveur:',errorData);// Afficher les erreurs de validation détaillées\nif(errorData.errors&&errorData.errors.length>0){console.error('📋 Erreurs de validation détaillées:');errorData.errors.forEach((error,index)=>{console.error(\"\".concat(index+1,\". \").concat(error.msg,\" (\").concat(error.param,\")\"));});// Afficher la première erreur à l'utilisateur\nconst firstError=errorData.errors[0];throw new Error(\"\".concat(firstError.param,\": \").concat(firstError.msg));}throw new Error(errorData.message||'Erreur lors de la création de la commande');}const result=await response.json();console.log('✅ Commande créée avec succès:',result);toast.success('Commande passée avec succès !');onSuccess(result.commande||result.order||result);// Passer la commande créée\n}catch(error){console.error('❌ Erreur lors de la création de commande:',error);toast.error(error.message||'Erreur de connexion');}finally{setLoading(false);}};const getFieldError=fieldName=>{return errors[fieldName]||'';};return/*#__PURE__*/_jsx(\"div\",{className:\"checkout-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Finaliser la commande\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"close-btn\",children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"checkout-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-sections\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Adresse de livraison\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"adresse.nom\",children:\"Nom *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"adresse.nom\",name:\"adresseLivraison.nom\",value:formData.adresseLivraison.nom,onChange:handleChange,placeholder:\"Ben Ali\",className:getFieldError('adresseLivraison.nom')?'error':''}),getFieldError('adresseLivraison.nom')&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:getFieldError('adresseLivraison.nom')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"adresse.prenom\",children:\"Pr\\xE9nom *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"adresse.prenom\",name:\"adresseLivraison.prenom\",value:formData.adresseLivraison.prenom,onChange:handleChange,placeholder:\"Ahmed\",className:getFieldError('adresseLivraison.prenom')?'error':''}),getFieldError('adresseLivraison.prenom')&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:getFieldError('adresseLivraison.prenom')})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"adresse.telephone\",children:\"T\\xE9l\\xE9phone *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",id:\"adresse.telephone\",name:\"adresseLivraison.telephone\",value:formData.adresseLivraison.telephone,onChange:handleChange,placeholder:\"+216 20 123 456\",className:getFieldError('adresseLivraison.telephone')?'error':''}),getFieldError('adresseLivraison.telephone')&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:getFieldError('adresseLivraison.telephone')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"adresse.rue\",children:\"Rue *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"adresse.rue\",name:\"adresseLivraison.rue\",value:formData.adresseLivraison.rue,onChange:handleChange,placeholder:\"Avenue Habib Bourguiba, 1000\",className:getFieldError('adresseLivraison.rue')?'error':''}),getFieldError('adresseLivraison.rue')&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:getFieldError('adresseLivraison.rue')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"adresse.codePostal\",children:\"Code postal *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"adresse.codePostal\",name:\"adresseLivraison.codePostal\",value:formData.adresseLivraison.codePostal,onChange:handleChange,placeholder:\"1000\",className:getFieldError('adresseLivraison.codePostal')?'error':''}),getFieldError('adresseLivraison.codePostal')&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:getFieldError('adresseLivraison.codePostal')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"adresse.ville\",children:\"Ville *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"adresse.ville\",name:\"adresseLivraison.ville\",value:formData.adresseLivraison.ville,onChange:handleChange,placeholder:\"Tunis\",className:getFieldError('adresseLivraison.ville')?'error':''}),getFieldError('adresseLivraison.ville')&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:getFieldError('adresseLivraison.ville')})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"adresse.pays\",children:\"Pays\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"adresse.pays\",name:\"adresseLivraison.pays\",value:formData.adresseLivraison.pays,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Tunisie\",children:\"Tunisie\"}),/*#__PURE__*/_jsx(\"option\",{value:\"France\",children:\"France\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Alg\\xE9rie\",children:\"Alg\\xE9rie\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Maroc\",children:\"Maroc\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Libye\",children:\"Libye\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\xC9gypte\",children:\"\\xC9gypte\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Italie\",children:\"Italie\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Espagne\",children:\"Espagne\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Allemagne\",children:\"Allemagne\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Canada\",children:\"Canada\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"M\\xE9thode de paiement\"}),/*#__PURE__*/_jsx(\"div\",{className:\"payment-methods\",children:getActivePaymentMethods().map(method=>/*#__PURE__*/_jsxs(\"label\",{className:\"payment-method\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"methodePaiement\",value:method.value,checked:formData.methodePaiement===method.value,onChange:handleChange}),/*#__PURE__*/_jsx(\"span\",{className:\"checkmark\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"method-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"method-name\",children:method.label}),/*#__PURE__*/_jsx(\"span\",{className:\"method-description\",children:method.description})]})]},method.value))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Notes de commande (optionnel)\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"notes\",value:formData.notes,onChange:handleChange,placeholder:\"Instructions sp\\xE9ciales, pr\\xE9f\\xE9rences de livraison...\",rows:\"3\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-summary\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"R\\xE9sum\\xE9 de la commande\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Sous-total\"}),/*#__PURE__*/_jsxs(\"span\",{children:[(total-shipping).toFixed(2),\" TND\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Livraison\"}),/*#__PURE__*/_jsx(\"span\",{children:shipping===0?'Gratuit':\"\".concat(shipping.toFixed(2),\" TND\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row total\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{children:[total.toFixed(2),\" TND\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"btn-secondary\",disabled:loading,children:\"Annuler\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",disabled:loading,children:loading?'Traitement...':'Confirmer la commande'})]})]})]})});};export default Cart;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","FaTrash","FaArrowLeft","FaLock","FaTruck","FaCreditCard","FaShieldAlt","toast","useCart","useAuth","useOrders","useSettings","formatBrand","jsx","_jsx","jsxs","_jsxs","Cart","loading","setLoading","updating","setUpdating","showCheckout","setShowCheckout","forceUpdate","setForceUpdate","cart","updateQuantity","removeFromCart","clearCart","getTotal","getItemCount","user","addOrder","getActivePaymentMethods","calculateDeliveryFees","getDeliveryInfo","getCurrency","navigate","fetchCart","_cart$articles","console","log","articles","length","error","handleQuantityChange","productId","newQuantity","success","handleRemoveItem","result","prev","handleClearCart","window","confirm","handleCheckout","state","from","handleContinueShopping","className","children","to","onClick","subtotal","shipping","total","itemCount","deliveryInfo","currency","disabled","map","item","CartItem","onQuantityChange","onRemove","concat","_id","toFixed","livraisonGratuite","seuil","CheckoutSection","onClose","onSuccess","newOrder","_ref","_item$produit$images","_item$produit$images$","_item$produit$images2","_item$produit$images3","_item$produit$images4","quantity","setQuantity","quantite","produit","handleRemove","price","prixUnitaire","totalPrice","src","images","url","alt","nom","onError","e","target","marque","taille","couleur","title","_ref2","formData","setFormData","adresseLivraison","prenom","rue","ville","codePostal","pays","telephone","methodePaiement","notes","errors","setErrors","activeMethods","_objectSpread","value","handleChange","name","includes","parent","child","split","validateForm","newErrors","trim","test","Object","keys","handleSubmit","preventDefault","orderData","response","fetch","method","headers","localStorage","getItem","body","JSON","stringify","status","statusText","ok","errorData","json","forEach","index","msg","param","firstError","Error","message","commande","order","getFieldError","fieldName","onSubmit","htmlFor","type","id","onChange","placeholder","checked","label","description","rows"],"sources":["C:/Users/houda/OneDrive/Bureau/boutique-vetements/frontend-vercel/src/pages/Cart.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { FaTrash, FaArrowLeft, FaLock, FaTruck, FaCreditCard, FaShieldAlt } from 'react-icons/fa';\nimport { toast } from 'react-toastify';\nimport { useCart } from '../contexts/CartContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useOrders } from '../contexts/OrdersContext';\nimport { useSettings } from '../contexts/SettingsContext';\nimport { formatBrand } from '../utils/formatUtils';\nimport '../styles/Cart.css';\n\nconst Cart = () => {\n  const [loading, setLoading] = useState(true);\n  const [updating, setUpdating] = useState(false);\n  const [showCheckout, setShowCheckout] = useState(false);\n  const [forceUpdate, setForceUpdate] = useState(0);\n\n  const { \n    cart, \n    updateQuantity, \n    removeFromCart, \n    clearCart, \n    getTotal, \n    getItemCount \n  } = useCart();\n  \n  const { user } = useAuth();\n  const { addOrder } = useOrders();\n  const { getActivePaymentMethods, calculateDeliveryFees, getDeliveryInfo, getCurrency } = useSettings();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (user) {\n      fetchCart();\n    } else {\n      setLoading(false);\n    }\n  }, [user]);\n\n  // Effet pour forcer la mise à jour quand le panier change\n  useEffect(() => {\n    console.log('🔄 Panier mis à jour:', cart);\n    console.log('🔄 Nombre d\\'articles:', cart.articles?.length || 0);\n  }, [cart]);\n\n  const fetchCart = async () => {\n    try {\n      setLoading(true);\n      // Cart is already loaded by the context, no need to fetch\n    } catch (error) {\n      toast.error('Erreur lors du chargement du panier');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleQuantityChange = async (productId, newQuantity) => {\n    if (newQuantity < 1) return;\n\n    try {\n      setUpdating(true);\n      await updateQuantity(productId, newQuantity);\n      // Le panier est automatiquement mis à jour par le contexte\n      toast.success('Quantité mise à jour');\n    } catch (error) {\n      toast.error('Erreur lors de la mise à jour de la quantité');\n    } finally {\n      setUpdating(false);\n    }\n  };\n\n  const handleRemoveItem = async (productId) => {\n    console.log('🗑️ Suppression du produit:', productId);\n    console.log('Panier avant suppression:', cart);\n    \n    try {\n      setUpdating(true);\n      const result = await removeFromCart(productId);\n      console.log('Résultat de la suppression:', result);\n      \n      if (result.success) {\n        toast.success('Produit retiré du panier');\n        // Forcer le re-render\n        setForceUpdate(prev => prev + 1);\n        console.log('🔄 Force update déclenché');\n      } else {\n        toast.error('Erreur lors de la suppression du produit');\n      }\n    } catch (error) {\n      console.error('Erreur lors de la suppression:', error);\n      toast.error('Erreur lors de la suppression du produit');\n    } finally {\n      setUpdating(false);\n    }\n  };\n\n  const handleClearCart = async () => {\n    if (window.confirm('Êtes-vous sûr de vouloir vider votre panier ?')) {\n      try {\n        setUpdating(true);\n        await clearCart();\n        toast.success('Panier vidé');\n      } catch (error) {\n        toast.error('Erreur lors du vidage du panier');\n      } finally {\n        setUpdating(false);\n      }\n    }\n  };\n\n  const handleCheckout = () => {\n    if (!user) {\n      toast.error('Veuillez vous connecter pour continuer');\n      navigate('/login', { state: { from: '/cart' } });\n      return;\n    }\n    setShowCheckout(true);\n  };\n\n  const handleContinueShopping = () => {\n    navigate('/products');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"loading-spinner\"></div>\n        <p>Chargement du panier...</p>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <div className=\"cart-page\">\n        <div className=\"cart-container\">\n          <div className=\"cart-header\">\n            <h1>Mon Panier</h1>\n          </div>\n          <div className=\"login-required\">\n            <h2>Connexion requise</h2>\n            <p>Veuillez vous connecter pour accéder à votre panier</p>\n            <div className=\"auth-buttons\">\n              <Link to=\"/login\" className=\"btn-primary\">\n                Se connecter\n              </Link>\n              <Link to=\"/register\" className=\"btn-secondary\">\n                Créer un compte\n              </Link>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (cart.articles && cart.articles.length === 0) {\n    return (\n      <div className=\"cart-page\">\n        <div className=\"cart-container\">\n          <div className=\"cart-header\">\n            <h1>Mon Panier</h1>\n          </div>\n          <div className=\"empty-cart\">\n            <div className=\"empty-cart-icon\">🛒</div>\n            <h2>Votre panier est vide</h2>\n            <p>Découvrez nos produits et commencez vos achats</p>\n            <button onClick={handleContinueShopping} className=\"btn-primary\">\n              Continuer mes achats\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const subtotal = getTotal();\n  const shipping = calculateDeliveryFees(subtotal);\n  const total = subtotal + shipping;\n  const itemCount = getItemCount();\n  const deliveryInfo = getDeliveryInfo();\n  const currency = getCurrency();\n\n  return (\n    <div className=\"cart-page\">\n      <div className=\"cart-container\">\n        <div className=\"cart-header\">\n          <h1>Mon Panier</h1>\n          <p>{itemCount} article(s) dans votre panier</p>\n        </div>\n\n        <div className=\"cart-content\">\n          {/* Liste des produits */}\n          <div className=\"cart-items\">\n            <div className=\"cart-items-header\">\n              <h3>Produits</h3>\n              <button \n                onClick={handleClearCart}\n                className=\"clear-cart-btn\"\n                disabled={updating}\n              >\n                <FaTrash />\n                Vider le panier\n              </button>\n            </div>\n\n            {cart.articles && cart.articles.map((item) => (\n              <CartItem\n                key={`${item._id}-${forceUpdate}`}\n                item={item}\n                onQuantityChange={handleQuantityChange}\n                onRemove={handleRemoveItem}\n                updating={updating}\n              />\n            ))}\n          </div>\n\n          {/* Résumé et commande */}\n          <div className=\"cart-summary\">\n            <div className=\"summary-card\">\n              <h3>Résumé de la commande</h3>\n              \n              <div className=\"summary-details\">\n                <div className=\"summary-row\">\n                  <span>Sous-total ({itemCount} article(s))</span>\n                  <span>{subtotal.toFixed(2)} {currency}</span>\n                </div>\n                \n                <div className=\"summary-row\">\n                  <span>Frais de livraison</span>\n                  <span>\n                    {shipping === 0 ? (\n                      <span className=\"free-shipping\">Gratuit</span>\n                    ) : (\n                      `${shipping.toFixed(2)} ${currency}`\n                    )}\n                  </span>\n                </div>\n                \n                {shipping > 0 && deliveryInfo.livraisonGratuite && (\n                  <div className=\"shipping-info\">\n                    <small>\n                      Livraison gratuite à partir de {deliveryInfo.seuil} {currency} d'achat\n                    </small>\n                  </div>\n                )}\n                \n                <div className=\"summary-row total\">\n                  <span>Total</span>\n                  <span>{total.toFixed(2)} {currency}</span>\n                </div>\n              </div>\n\n              <div className=\"summary-actions\">\n                <button\n                  onClick={handleCheckout}\n                  className=\"checkout-btn\"\n                  disabled={updating}\n                >\n                  <FaLock />\n                  Passer la commande\n                </button>\n                \n                <button\n                  onClick={handleContinueShopping}\n                  className=\"continue-shopping-btn\"\n                >\n                  <FaArrowLeft />\n                  Continuer mes achats\n                </button>\n              </div>\n\n              <div className=\"security-info\">\n                <div className=\"security-item\">\n                  <FaShieldAlt />\n                  <span>Paiement sécurisé</span>\n                </div>\n                <div className=\"security-item\">\n                  <FaTruck />\n                  <span>Livraison rapide</span>\n                </div>\n                <div className=\"security-item\">\n                  <FaCreditCard />\n                  <span>Retours gratuits</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Section de passage de commande */}\n        {showCheckout && (\n          <CheckoutSection\n            cart={cart}\n            total={total}\n            shipping={shipping}\n            onClose={() => setShowCheckout(false)}\n            onSuccess={(newOrder) => {\n              setShowCheckout(false);\n              addOrder(newOrder); // Ajouter la nouvelle commande au contexte\n              navigate('/orders');\n            }}\n            getActivePaymentMethods={getActivePaymentMethods}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\n// Composant article du panier\nconst CartItem = ({ item, onQuantityChange, onRemove, updating }) => {\n  const [quantity, setQuantity] = useState(item.quantite);\n\n  const handleQuantityChange = (newQuantity) => {\n    if (newQuantity >= 1 && newQuantity <= 10) {\n      setQuantity(newQuantity);\n      onQuantityChange(item.produit._id, newQuantity);\n    }\n  };\n\n  const handleRemove = () => {\n    console.log('🔍 CartItem - item:', item);\n    console.log('🔍 CartItem - item.produit:', item.produit);\n    console.log('🔍 CartItem - item.produit._id:', item.produit._id);\n    onRemove(item.produit._id);\n  };\n\n  const price = item.prixUnitaire;\n  const totalPrice = price * item.quantite;\n\n  return (\n    <div className=\"cart-item\">\n      <div className=\"item-image\">\n        <img \n          src={item.produit.images?.[0]?.url || item.produit.images?.[0] || '/placeholder-product.jpg'} \n          alt={item.produit.images?.[0]?.alt || item.produit.nom}\n          onError={(e) => {\n            e.target.src = '/placeholder-product.jpg';\n          }}\n        />\n      </div>\n\n      <div className=\"item-details\">\n        <div className=\"item-info\">\n          <h4 className=\"item-name\">\n            <Link to={`/product/${item.produit._id}`}>\n              {item.produit.nom}\n            </Link>\n          </h4>\n          <p className=\"item-brand\">{formatBrand(item.produit.marque)}</p>\n          <div className=\"item-options\">\n            <span className=\"option\">Taille: {item.taille}</span>\n            <span className=\"option\">Couleur: {item.couleur}</span>\n          </div>\n        </div>\n\n        <div className=\"item-price\">\n          <span className=\"unit-price\">{price.toFixed(2)} TND</span>\n          <span className=\"total-price\">{totalPrice.toFixed(2)} TND</span>\n        </div>\n\n        <div className=\"item-quantity\">\n          <div className=\"quantity-controls\">\n            <button\n              onClick={() => handleQuantityChange(quantity - 1)}\n              disabled={quantity <= 1 || updating}\n              className=\"quantity-btn\"\n            >\n              -\n            </button>\n            <span className=\"quantity-display\">{item.quantite}</span>\n            <button\n              onClick={() => handleQuantityChange(quantity + 1)}\n              disabled={quantity >= 10 || updating}\n              className=\"quantity-btn\"\n            >\n              +\n            </button>\n          </div>\n        </div>\n\n        <button\n          onClick={handleRemove}\n          disabled={updating}\n          className=\"remove-item-btn\"\n          title=\"Retirer du panier\"\n        >\n          <FaTrash />\n        </button>\n      </div>\n    </div>\n  );\n};\n\n// Composant de passage de commande\nconst CheckoutSection = ({ cart, total, shipping, onClose, onSuccess, getActivePaymentMethods }) => {\n  const [formData, setFormData] = useState({\n    adresseLivraison: {\n      nom: '',\n      prenom: '',\n      rue: '',\n      ville: '',\n      codePostal: '',\n      pays: 'Tunisie',\n      telephone: ''\n    },\n    methodePaiement: 'carte',\n    notes: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [errors, setErrors] = useState({});\n\n  // Initialiser la méthode de paiement avec la première méthode active\n  useEffect(() => {\n    const activeMethods = getActivePaymentMethods();\n    if (activeMethods.length > 0 && formData.methodePaiement === 'carte') {\n      setFormData(prev => ({\n        ...prev,\n        methodePaiement: activeMethods[0].value\n      }));\n    }\n  }, []);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    \n    if (name.includes('.')) {\n      const [parent, child] = name.split('.');\n      setFormData(prev => ({\n        ...prev,\n        [parent]: {\n          ...prev[parent],\n          [child]: value\n        }\n      }));\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    }\n    \n    // Effacer l'erreur du champ modifié\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n\n    // Validation du nom\n    if (!formData.adresseLivraison.nom.trim()) {\n      newErrors['adresseLivraison.nom'] = 'Le nom est requis';\n    }\n\n    // Validation du prénom\n    if (!formData.adresseLivraison.prenom.trim()) {\n      newErrors['adresseLivraison.prenom'] = 'Le prénom est requis';\n    }\n\n    // Validation de la rue\n    if (!formData.adresseLivraison.rue.trim()) {\n      newErrors['adresseLivraison.rue'] = 'La rue est requise';\n    }\n\n    // Validation de la ville\n    if (!formData.adresseLivraison.ville.trim()) {\n      newErrors['adresseLivraison.ville'] = 'La ville est requise';\n    }\n\n    // Validation du code postal\n    if (!formData.adresseLivraison.codePostal) {\n      newErrors['adresseLivraison.codePostal'] = 'Le code postal est requis';\n    } else if (!/^\\d{5}$/.test(formData.adresseLivraison.codePostal)) {\n      newErrors['adresseLivraison.codePostal'] = 'Le code postal doit contenir 5 chiffres';\n    }\n\n    // Validation du téléphone\n    if (!formData.adresseLivraison.telephone.trim()) {\n      newErrors['adresseLivraison.telephone'] = 'Le téléphone est requis';\n    } else if (!/^[0-9+\\-\\s()]{10,}$/.test(formData.adresseLivraison.telephone)) {\n      newErrors['adresseLivraison.telephone'] = 'Le téléphone doit contenir au moins 10 caractères';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    setLoading(true);\n    \n    try {\n      const orderData = {\n        adresseLivraison: formData.adresseLivraison,\n        methodePaiement: formData.methodePaiement,\n        notes: formData.notes\n      };\n\n      console.log('📤 Envoi des données de commande:', orderData);\n\n      const response = await fetch('/api/orders', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-auth-token': localStorage.getItem('token')\n        },\n        body: JSON.stringify(orderData)\n      });\n\n      console.log('📥 Réponse du serveur:', response.status, response.statusText);\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        console.error('❌ Erreur du serveur:', errorData);\n        \n        // Afficher les erreurs de validation détaillées\n        if (errorData.errors && errorData.errors.length > 0) {\n          console.error('📋 Erreurs de validation détaillées:');\n          errorData.errors.forEach((error, index) => {\n            console.error(`${index + 1}. ${error.msg} (${error.param})`);\n          });\n          \n          // Afficher la première erreur à l'utilisateur\n          const firstError = errorData.errors[0];\n          throw new Error(`${firstError.param}: ${firstError.msg}`);\n        }\n        \n        throw new Error(errorData.message || 'Erreur lors de la création de la commande');\n      }\n\n      const result = await response.json();\n      console.log('✅ Commande créée avec succès:', result);\n      \n      toast.success('Commande passée avec succès !');\n      onSuccess(result.commande || result.order || result); // Passer la commande créée\n    } catch (error) {\n      console.error('❌ Erreur lors de la création de commande:', error);\n      toast.error(error.message || 'Erreur de connexion');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getFieldError = (fieldName) => {\n    return errors[fieldName] || '';\n  };\n\n  return (\n    <div className=\"checkout-overlay\">\n      <div className=\"checkout-modal\">\n        <div className=\"checkout-header\">\n          <h2>Finaliser la commande</h2>\n          <button onClick={onClose} className=\"close-btn\">×</button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"checkout-form\">\n          <div className=\"checkout-sections\">\n            {/* Adresse de livraison */}\n            <div className=\"checkout-section\">\n              <h3>Adresse de livraison</h3>\n              \n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label htmlFor=\"adresse.nom\">Nom *</label>\n                  <input\n                    type=\"text\"\n                    id=\"adresse.nom\"\n                    name=\"adresseLivraison.nom\"\n                    value={formData.adresseLivraison.nom}\n                    onChange={handleChange}\n                    placeholder=\"Ben Ali\"\n                    className={getFieldError('adresseLivraison.nom') ? 'error' : ''}\n                  />\n                  {getFieldError('adresseLivraison.nom') && (\n                    <span className=\"error-message\">{getFieldError('adresseLivraison.nom')}</span>\n                  )}\n                </div>\n\n                <div className=\"form-group\">\n                  <label htmlFor=\"adresse.prenom\">Prénom *</label>\n                  <input\n                    type=\"text\"\n                    id=\"adresse.prenom\"\n                    name=\"adresseLivraison.prenom\"\n                    value={formData.adresseLivraison.prenom}\n                    onChange={handleChange}\n                    placeholder=\"Ahmed\"\n                    className={getFieldError('adresseLivraison.prenom') ? 'error' : ''}\n                  />\n                  {getFieldError('adresseLivraison.prenom') && (\n                    <span className=\"error-message\">{getFieldError('adresseLivraison.prenom')}</span>\n                  )}\n                </div>\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"adresse.telephone\">Téléphone *</label>\n                <input\n                  type=\"tel\"\n                  id=\"adresse.telephone\"\n                  name=\"adresseLivraison.telephone\"\n                  value={formData.adresseLivraison.telephone}\n                  onChange={handleChange}\n                  placeholder=\"+216 20 123 456\"\n                  className={getFieldError('adresseLivraison.telephone') ? 'error' : ''}\n                />\n                {getFieldError('adresseLivraison.telephone') && (\n                  <span className=\"error-message\">{getFieldError('adresseLivraison.telephone')}</span>\n                )}\n              </div>\n              \n              <div className=\"form-group\">\n                <label htmlFor=\"adresse.rue\">Rue *</label>\n                <input\n                  type=\"text\"\n                  id=\"adresse.rue\"\n                  name=\"adresseLivraison.rue\"\n                  value={formData.adresseLivraison.rue}\n                  onChange={handleChange}\n                  placeholder=\"Avenue Habib Bourguiba, 1000\"\n                  className={getFieldError('adresseLivraison.rue') ? 'error' : ''}\n                />\n                {getFieldError('adresseLivraison.rue') && (\n                  <span className=\"error-message\">{getFieldError('adresseLivraison.rue')}</span>\n                )}\n              </div>\n\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label htmlFor=\"adresse.codePostal\">Code postal *</label>\n                  <input\n                    type=\"text\"\n                    id=\"adresse.codePostal\"\n                    name=\"adresseLivraison.codePostal\"\n                    value={formData.adresseLivraison.codePostal}\n                    onChange={handleChange}\n                    placeholder=\"1000\"\n                    className={getFieldError('adresseLivraison.codePostal') ? 'error' : ''}\n                  />\n                  {getFieldError('adresseLivraison.codePostal') && (\n                    <span className=\"error-message\">{getFieldError('adresseLivraison.codePostal')}</span>\n                  )}\n                </div>\n\n                <div className=\"form-group\">\n                  <label htmlFor=\"adresse.ville\">Ville *</label>\n                  <input\n                    type=\"text\"\n                    id=\"adresse.ville\"\n                    name=\"adresseLivraison.ville\"\n                    value={formData.adresseLivraison.ville}\n                    onChange={handleChange}\n                    placeholder=\"Tunis\"\n                    className={getFieldError('adresseLivraison.ville') ? 'error' : ''}\n                  />\n                  {getFieldError('adresseLivraison.ville') && (\n                    <span className=\"error-message\">{getFieldError('adresseLivraison.ville')}</span>\n                  )}\n                </div>\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"adresse.pays\">Pays</label>\n                <select\n                  id=\"adresse.pays\"\n                  name=\"adresseLivraison.pays\"\n                  value={formData.adresseLivraison.pays}\n                  onChange={handleChange}\n                >\n                  <option value=\"Tunisie\">Tunisie</option>\n                  <option value=\"France\">France</option>\n                  <option value=\"Algérie\">Algérie</option>\n                  <option value=\"Maroc\">Maroc</option>\n                  <option value=\"Libye\">Libye</option>\n                  <option value=\"Égypte\">Égypte</option>\n                  <option value=\"Italie\">Italie</option>\n                  <option value=\"Espagne\">Espagne</option>\n                  <option value=\"Allemagne\">Allemagne</option>\n                  <option value=\"Canada\">Canada</option>\n                </select>\n              </div>\n            </div>\n\n            {/* Méthode de paiement */}\n            <div className=\"checkout-section\">\n              <h3>Méthode de paiement</h3>\n              \n              <div className=\"payment-methods\">\n                {getActivePaymentMethods().map((method) => (\n                  <label key={method.value} className=\"payment-method\">\n                    <input\n                      type=\"radio\"\n                      name=\"methodePaiement\"\n                      value={method.value}\n                      checked={formData.methodePaiement === method.value}\n                      onChange={handleChange}\n                    />\n                    <span className=\"checkmark\"></span>\n                    <div className=\"method-info\">\n                      <span className=\"method-name\">{method.label}</span>\n                      <span className=\"method-description\">{method.description}</span>\n                    </div>\n                  </label>\n                ))}\n              </div>\n            </div>\n\n            {/* Notes */}\n            <div className=\"checkout-section\">\n              <h3>Notes de commande (optionnel)</h3>\n              <textarea\n                name=\"notes\"\n                value={formData.notes}\n                onChange={handleChange}\n                placeholder=\"Instructions spéciales, préférences de livraison...\"\n                rows=\"3\"\n              />\n            </div>\n          </div>\n\n          {/* Résumé final */}\n          <div className=\"checkout-summary\">\n            <h3>Résumé de la commande</h3>\n            <div className=\"summary-row\">\n              <span>Sous-total</span>\n              <span>{(total - shipping).toFixed(2)} TND</span>\n            </div>\n            <div className=\"summary-row\">\n              <span>Livraison</span>\n              <span>{shipping === 0 ? 'Gratuit' : `${shipping.toFixed(2)} TND`}</span>\n            </div>\n            <div className=\"summary-row total\">\n              <span>Total</span>\n              <span>{total.toFixed(2)} TND</span>\n            </div>\n          </div>\n\n          <div className=\"checkout-actions\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"btn-secondary\"\n              disabled={loading}\n            >\n              Annuler\n            </button>\n            <button\n              type=\"submit\"\n              className=\"btn-primary\"\n              disabled={loading}\n            >\n              {loading ? 'Traitement...' : 'Confirmer la commande'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default Cart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
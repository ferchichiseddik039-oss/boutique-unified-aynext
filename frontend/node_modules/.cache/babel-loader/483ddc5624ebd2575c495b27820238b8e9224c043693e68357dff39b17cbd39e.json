{"ast":null,"code":"import _objectSpread from\"C:/Users/houda/OneDrive/Bureau/boutique-vetements/frontend-vercel/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// Configuration API simple et directe\nconst API_BASE_URL='https://boutique-backend-6rx5.onrender.com/api';// Fonction simple pour faire des requêtes\nexport const apiRequest=async function(endpoint){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const url=\"\".concat(API_BASE_URL).concat(endpoint);const defaultOptions={headers:{'Content-Type':'application/json'}};// Ajouter le token si disponible\nconst token=localStorage.getItem('token');if(token){defaultOptions.headers['x-auth-token']=token;}const config=_objectSpread(_objectSpread(_objectSpread({},defaultOptions),options),{},{headers:_objectSpread(_objectSpread({},defaultOptions.headers),options.headers)});try{const response=await fetch(url,config);// Gérer les erreurs 401\nif(response.status===401){localStorage.removeItem('token');const currentPath=window.location.pathname;if(currentPath.startsWith('/admin')){window.location.href='/admin-login';}else{window.location.href='/login';}throw new Error('Non autorisé');}if(!response.ok){throw new Error(\"Erreur \".concat(response.status,\": \").concat(response.statusText));}return await response.json();}catch(error){console.error('Erreur API:',error);throw error;}};// Fonctions API spécifiques\nexport const api={get:endpoint=>apiRequest(endpoint,{method:'GET'}),post:(endpoint,data)=>apiRequest(endpoint,{method:'POST',body:JSON.stringify(data)}),put:(endpoint,data)=>apiRequest(endpoint,{method:'PUT',body:JSON.stringify(data)}),delete:endpoint=>apiRequest(endpoint,{method:'DELETE'})};export default api;","map":{"version":3,"names":["API_BASE_URL","apiRequest","endpoint","options","arguments","length","undefined","url","concat","defaultOptions","headers","token","localStorage","getItem","config","_objectSpread","response","fetch","status","removeItem","currentPath","window","location","pathname","startsWith","href","Error","ok","statusText","json","error","console","api","get","method","post","data","body","JSON","stringify","put","delete"],"sources":["C:/Users/houda/OneDrive/Bureau/boutique-vetements/frontend-vercel/src/config/api-simple.js"],"sourcesContent":["// Configuration API simple et directe\r\nconst API_BASE_URL = 'https://boutique-backend-6rx5.onrender.com/api';\r\n\r\n// Fonction simple pour faire des requêtes\r\nexport const apiRequest = async (endpoint, options = {}) => {\r\n  const url = `${API_BASE_URL}${endpoint}`;\r\n  \r\n  const defaultOptions = {\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n  };\r\n\r\n  // Ajouter le token si disponible\r\n  const token = localStorage.getItem('token');\r\n  if (token) {\r\n    defaultOptions.headers['x-auth-token'] = token;\r\n  }\r\n\r\n  const config = {\r\n    ...defaultOptions,\r\n    ...options,\r\n    headers: {\r\n      ...defaultOptions.headers,\r\n      ...options.headers,\r\n    },\r\n  };\r\n\r\n  try {\r\n    const response = await fetch(url, config);\r\n    \r\n    // Gérer les erreurs 401\r\n    if (response.status === 401) {\r\n      localStorage.removeItem('token');\r\n      const currentPath = window.location.pathname;\r\n      if (currentPath.startsWith('/admin')) {\r\n        window.location.href = '/admin-login';\r\n      } else {\r\n        window.location.href = '/login';\r\n      }\r\n      throw new Error('Non autorisé');\r\n    }\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`Erreur ${response.status}: ${response.statusText}`);\r\n    }\r\n\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('Erreur API:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Fonctions API spécifiques\r\nexport const api = {\r\n  get: (endpoint) => apiRequest(endpoint, { method: 'GET' }),\r\n  post: (endpoint, data) => apiRequest(endpoint, {\r\n    method: 'POST',\r\n    body: JSON.stringify(data),\r\n  }),\r\n  put: (endpoint, data) => apiRequest(endpoint, {\r\n    method: 'PUT',\r\n    body: JSON.stringify(data),\r\n  }),\r\n  delete: (endpoint) => apiRequest(endpoint, { method: 'DELETE' }),\r\n};\r\n\r\nexport default api;\r\n"],"mappings":"sJAAA;AACA,KAAM,CAAAA,YAAY,CAAG,gDAAgD,CAErE;AACA,MAAO,MAAM,CAAAC,UAAU,CAAG,cAAAA,CAAOC,QAAQ,CAAmB,IAAjB,CAAAC,OAAO,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAAC,CACrD,KAAM,CAAAG,GAAG,IAAAC,MAAA,CAAMR,YAAY,EAAAQ,MAAA,CAAGN,QAAQ,CAAE,CAExC,KAAM,CAAAO,cAAc,CAAG,CACrBC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CAAC,CAED;AACA,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACTF,cAAc,CAACC,OAAO,CAAC,cAAc,CAAC,CAAGC,KAAK,CAChD,CAEA,KAAM,CAAAG,MAAM,CAAAC,aAAA,CAAAA,aAAA,CAAAA,aAAA,IACPN,cAAc,EACdN,OAAO,MACVO,OAAO,CAAAK,aAAA,CAAAA,aAAA,IACFN,cAAc,CAACC,OAAO,EACtBP,OAAO,CAACO,OAAO,CACnB,EACF,CAED,GAAI,CACF,KAAM,CAAAM,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACV,GAAG,CAAEO,MAAM,CAAC,CAEzC;AACA,GAAIE,QAAQ,CAACE,MAAM,GAAK,GAAG,CAAE,CAC3BN,YAAY,CAACO,UAAU,CAAC,OAAO,CAAC,CAChC,KAAM,CAAAC,WAAW,CAAGC,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAC5C,GAAIH,WAAW,CAACI,UAAU,CAAC,QAAQ,CAAC,CAAE,CACpCH,MAAM,CAACC,QAAQ,CAACG,IAAI,CAAG,cAAc,CACvC,CAAC,IAAM,CACLJ,MAAM,CAACC,QAAQ,CAACG,IAAI,CAAG,QAAQ,CACjC,CACA,KAAM,IAAI,CAAAC,KAAK,CAAC,cAAc,CAAC,CACjC,CAEA,GAAI,CAACV,QAAQ,CAACW,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAD,KAAK,WAAAlB,MAAA,CAAWQ,QAAQ,CAACE,MAAM,OAAAV,MAAA,CAAKQ,QAAQ,CAACY,UAAU,CAAE,CAAC,CACtE,CAEA,MAAO,MAAM,CAAAZ,QAAQ,CAACa,IAAI,CAAC,CAAC,CAC9B,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,aAAa,CAAEA,KAAK,CAAC,CACnC,KAAM,CAAAA,KAAK,CACb,CACF,CAAC,CAED;AACA,MAAO,MAAM,CAAAE,GAAG,CAAG,CACjBC,GAAG,CAAG/B,QAAQ,EAAKD,UAAU,CAACC,QAAQ,CAAE,CAAEgC,MAAM,CAAE,KAAM,CAAC,CAAC,CAC1DC,IAAI,CAAEA,CAACjC,QAAQ,CAAEkC,IAAI,GAAKnC,UAAU,CAACC,QAAQ,CAAE,CAC7CgC,MAAM,CAAE,MAAM,CACdG,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACH,IAAI,CAC3B,CAAC,CAAC,CACFI,GAAG,CAAEA,CAACtC,QAAQ,CAAEkC,IAAI,GAAKnC,UAAU,CAACC,QAAQ,CAAE,CAC5CgC,MAAM,CAAE,KAAK,CACbG,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACH,IAAI,CAC3B,CAAC,CAAC,CACFK,MAAM,CAAGvC,QAAQ,EAAKD,UAAU,CAACC,QAAQ,CAAE,CAAEgC,MAAM,CAAE,QAAS,CAAC,CACjE,CAAC,CAED,cAAe,CAAAF,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}